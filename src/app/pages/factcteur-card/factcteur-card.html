<html dir="rtl" lang="ar">
  <div
    class="card"
    style="
      background-color: transparent;
      border: none;
      box-shadow: none;
      margin: 10px;
    "
  >
    <loading *ngIf="isLoading"></loading>
    <div
      *ngIf="showExports"
      style="
        margin: 20px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-around;
      "
    >
      <button
        class="btn btn-primary"
        style="width: 200px; margin-bottom: 20px"
        (click)="printFacture()"
      >
        print
      </button>
      <button
        class="btn btn-primary"
        (click)="exportPDF()"
        style="width: 200px; margin-bottom: 20px"
      >
        export as pdf
      </button>
    </div>
    <div id="facteur-card" style="padding: 20px">
      <div
        class="facteur-card"
        style="border: 2px solid #999696"
        *ngIf="!isLoading"
      >
        <div>
          <div class="head">
            <div class="h-item right">
              <div class="f-titel">ممثل حصير معتمد</div>
              <div class="f-subtitel">سوق السبخة - حانوت رقم 188</div>
              <div class="f-subtitel">عبدالله ولد السيد</div>

              <div class="f-constact">هاتف 22664151 - 36664151</div>
              <div class="f-constact">انواكشوط - موريتانيا</div>
            </div>
            <div class="h-item left">
              <div class="f-titel">Représantant des Nottes</div>
              <div class="f-subtitel">March Sebkha Boutique N°188</div>
              <div class="f-subtitel">Abdellahi O/ Sidi</div>

              <div class="f-constact">tel : 36664151 - 22664151</div>
              <div class="f-constact">NOUACHOTT - MAURITANIA</div>
            </div>
          </div>

          <div class="flex justify-between">
            <div>
              <p *ngIf="factureData.name">الزبون: {{ factureData.name }}</p>
              <p *ngIf="factureData.tel">رقم الهاتف: {{ factureData.tel }}</p>
              <p *ngIf="getTotaleDebts > 0">
                الدين سابقا: {{ getTotaleDebts }}
              </p>
              <p *ngIf="getTotaleDebts > 0">
                المجموع بعد الدين : {{ getTotaleDebts + getTotal }}
              </p>
              <p *ngIf="factureData.payed_price">
                المبلغ المدفوع : {{ factureData.payed_price }}
              </p>
            </div>
            <div class="text-right">
              <p>التاريخ: {{ factureData.date }}</p>
              <p *ngIf="factureData.garage">الكراج: {{ factureData.garage }}</p>
              <p *ngIf="factureData.transporter">
                الناقل: {{ factureData.transporter }}
              </p>
            </div>
          </div>
        </div>

        <div class="t-con">
          <table class="w-full mt-1 border-collapse border border-gray-400">
            <tr>
              <th class="f-titel" style="font-size: 15px"></th>
              <th class="f-titel" style="font-size: 15px">
                النوعية <br />
                Designation
              </th>
              <th class="f-titel" style="font-size: 15px">
                الكمية
                <br />
                Quantity
              </th>
              <th class="f-titel" style="font-size: 15px">
                العدد في الحزمة \العلبة
                <br />
                Numéro dans l'emballage
              </th>
              <th class="f-titel" style="font-size: 15px">
                س.الفرد <br />
                prix unitaire
              </th>
              <th class="f-titel" style="font-size: 15px">
                س.الإجمالي <br />
                prix total
              </th>
            </tr>

            <tr *ngFor="let f of factureData.data; let i = index">
              <td style="width: 20px">
                <span *ngIf="f.done">
                  <i class="fa-solid fa-check"></i>
                </span>
              </td>
              <td (click)="f.done = !f.done">{{ f.Designation }}</td>
              <td>{{ f.Quantity }}</td>
              <td>{{ f.package }}</td>
              <td>{{ f.prixUnitaire }}</td>
              <td>{{ f.prixTotal }}</td>
              <td>
                <i
                  class="fa-solid fa-x"
                  *ngIf="Editing"
                  style="color: rgb(250, 117, 117); cursor: pointer"
                  (click)="deleteItem(i)"
                ></i>
              </td>
            </tr>
          </table>
        </div>
        <div class="price-footer">
          <span class="" *ngIf="getTotaleDebts>0">
            <span>مجموع الدين سابقا</span>
            <span style="font-weight: bold; margin: 0 5px"
              >{{ getTotaleDebts }}</span
            >
          </span>
          <span *ngIf="factureData.payed_price">
            <span> المبلغ المدفوع</span>
            <span style="font-weight: bold; margin: 0 5px"
              >{{ factureData.payed_price }}</span
            >
          </span>
          <span *ngIf="getTotaleDebts + getTotal > 0">
            <span> المجموع مع الدين</span>
            <span style="font-weight: bold; margin: 0 5px"
              >{{ getTotaleDebts + getTotal}}</span
            >
          </span>
        </div>
        <div class="total-con">
          <span class="f-titel">الإجمالي:</span>
          <span class="total">{{ getTotal }}</span>
          <span class="f-titel"> Total</span>
        </div>
      </div>
    </div>

    <div *ngIf="factureData.note && showNote" class="note" style="width: 50%">
      <fieldset
        style="
          border: 1px solid lightblue;
          border-radius: 5px;
          font-size: 14;
          width: 100%;
          padding: 10px;
        "
      >
        <legend style="font-size: 14px; color: #395872">ملاحظة :</legend>
        {{factureData.note}}
      </fieldset>
    </div>
  </div>
</html>
