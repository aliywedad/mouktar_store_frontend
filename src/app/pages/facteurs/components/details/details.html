<html dir="rtl" lang="ar">
  <div class="card hfull">
    <loading *ngIf="isLoading"></loading>
    <div
      style="
        margin: 20px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-around;
      "
    >
      <button
        class="btn btn-primary"
        style="width: 200px; margin-bottom: 20px"
        (click)="printFacture()"
      >
        print
      </button>
      <button
        class="btn btn-primary"
        (click)="exportPDF()"
        style="width: 200px; margin-bottom: 20px"
      >
        export as pdf
      </button>
    </div>
    <div id="facteur-card" style="padding: 20px">
      <div class="facteur-card" *ngIf="!isLoading">
        <div>
          <div class="head">
            <div class="h-item right">
              <div class="f-titel">ممثل حصير معتمد</div>
              <div class="f-subtitel">سوق السبخة - حانوت رقم 188</div>
              <div class="f-subtitel">عبدالله ولد السيد</div>

              <div class="f-constact">هاتف 22664151 - 36664151</div>
              <div class="f-constact">انواكشوط - موريتانيا</div>
            </div>
            <div class="h-item left">
              <div class="f-titel">Représantant des Nottes</div>
              <div class="f-subtitel">March Sebkha Boutique N°188</div>
              <div class="f-subtitel">Abdellahi O/ Sidi</div>

              <div class="f-constact">tel : 36664151 - 22664151</div>
              <div class="f-constact">NOUACHOTT - MAURITANIA</div>
            </div>
          </div>

          <div class="flex justify-between">
            <div>
              <p *ngIf="factureData.name">الزبون: {{ factureData.name }}</p>
              <p *ngIf="factureData.tel">رقم الهاتف: {{ factureData.tel }}</p>
            </div>
            <div class="text-right">
              <p>
                التاريخ: {{ factureData.timestamp | date:'yyyy-MM-dd HH:mm:ss'
                }}
              </p>
              <p *ngIf="factureData.garage">الكراج: {{ factureData.garage }}</p>
              <p *ngIf="factureData.transporter">
                الحمال: {{ factureData.transporter }}
              </p>
            </div>
          </div>
        </div>

        <div class="t-con">
          <table class="w-full mt-1 border-collapse border border-gray-400">
            <tr>
              <th class="f-titel"></th>
              <th class="f-titel">النوعية / Designation</th>
              <th class="f-titel">Quantity / الكمية</th>
              <th class="f-titel">العدد في الحزمة / العلبة</th>

              <th class="f-titel">س.الفرد / prix unitaire</th>
              <th class="f-titel">س.الإجمالي / prix total</th>
            </tr>
            <tr *ngFor="let f of factureData.facture; let i = index">
              <td style="width: 20px">
                <span *ngIf="f.done">
                  <i class="fa-solid fa-check"></i>
                </span>
              </td>
              <td (click)="f.done = !f.done">{{ f.Designation }}</td>
              <td>{{ f.Quantity }}</td>
              <td>{{ f.package }}</td>
              <td>{{ f.prixUnitaire }}</td>
              <td>{{ f.prixTotal }}</td>
            </tr>
          </table>
        </div>
        <div class="total-con">
          <span class="f-titel">الإجمالي:</span>
          <span class="total">{{ getTotal }}</span>
          <span class="f-titel"> Total</span>
        </div>
      </div>
    </div>

    <div *ngIf="factureData.note" class="note  " style="  width: 50%;">
      <fieldset style="border: 1px solid lightblue; border-radius: 5px; font-size: 14; width:  100%; padding: 10px;">
        <legend style="font-size: 14px; color: #395872;">ملاحظة : </legend>
        {{factureData.note}}
      </fieldset>

    </div>
  </div>
</html>
